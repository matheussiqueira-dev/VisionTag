<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VisionTag Frontend | Detecção de Objetos com UX Profissional</title>
  <meta name="description" content="Frontend profissional do VisionTag para análise visual de imagens com resultados detalhados, histórico e processamento em lote." />
  <meta name="theme-color" content="#16213a" />
  <meta name="robots" content="index, follow" />
  <meta property="og:title" content="VisionTag Frontend" />
  <meta property="og:description" content="Interface moderna para detecção de objetos com tags em português." />
  <meta property="og:type" content="website" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/static/styles.css" />
  <script type="module" src="/static/js/app.js"></script>
</head>
<body>
  <a class="skip-link" href="#main-content">Pular para conteúdo principal</a>

  <div class="bg-layer bg-layer-1" aria-hidden="true"></div>
  <div class="bg-layer bg-layer-2" aria-hidden="true"></div>
  <div class="bg-grid" aria-hidden="true"></div>

  <header class="topbar">
    <div class="brand-wrap">
      <div class="brand-dot" aria-hidden="true"></div>
      <div>
        <p class="brand-kicker">VisionTag Experience</p>
        <h1>Frontend de Detecção Visual</h1>
      </div>
    </div>

    <nav class="top-actions" aria-label="Atalhos">
      <a href="/docs" target="_blank" rel="noopener noreferrer">Documentação da API</a>
      <a href="/api/v1/health" target="_blank" rel="noopener noreferrer">Health Check</a>
      <button type="button" id="openShortcutsBtn" class="top-link-btn">Atalhos</button>
      <button type="button" id="toggleContrastBtn" class="top-link-btn">Contraste</button>
    </nav>
  </header>

  <main id="main-content" class="app-main">
    <section class="hero card reveal" aria-label="Resumo do produto">
      <div>
        <p class="eyebrow">Plataforma Frontend Enterprise</p>
        <h2>Fluxo completo de análise visual com foco em clareza, velocidade e previsibilidade.</h2>
        <p>
          Faça upload único ou em lote, ajuste parâmetros de inferência e receba resultados operacionais com histórico persistente,
          filtros de confiança e exportação de relatório.
        </p>
      </div>
      <div class="hero-highlights" aria-label="Destaques da interface">
        <span>Upload único + lote</span>
        <span>Resultados detalhados</span>
        <span>Histórico e busca local</span>
        <span>Exportação JSON</span>
      </div>
    </section>

    <section class="journey card reveal" aria-label="Fluxo guiado da análise">
      <div class="journey-grid">
        <article>
          <p class="eyebrow">Fluxo Guiado</p>
          <h3 class="journey-title">Seu caminho de execução em 3 passos objetivos.</h3>
          <ol id="journeySteps" class="journey-steps">
            <li data-step="input">Entrada da imagem</li>
            <li data-step="config">Configuração de inferência</li>
            <li data-step="result">Resultado e decisão</li>
          </ol>
          <div id="contextSummary" class="context-summary" aria-live="polite"></div>
        </article>

        <article>
          <p class="eyebrow">Cenários Rápidos</p>
          <h3 class="journey-title">Escolha o fluxo ideal para começar em segundos.</h3>
          <div class="quick-scenarios">
            <button type="button" id="quickSingleBtn" class="scenario-card">
              <strong>Análise unitária</strong>
              <span>Upload ou URL para verificação rápida.</span>
            </button>
            <button type="button" id="quickBatchFilesBtn" class="scenario-card">
              <strong>Lote por arquivos</strong>
              <span>Processamento em massa de imagens locais.</span>
            </button>
            <button type="button" id="quickBatchUrlsBtn" class="scenario-card">
              <strong>Lote por URLs</strong>
              <span>Integração remota sem upload manual.</span>
            </button>
          </div>
        </article>
      </div>
    </section>

    <section class="workspace">
      <aside class="controls-column" aria-label="Controles de entrada">
        <article class="card section-card reveal">
          <div class="header-inline">
            <h3>Checklist de execução</h3>
            <span id="preflightBadge" class="status-pill">Validando</span>
          </div>
          <ul id="preflightList" class="preflight-list" aria-live="polite"></ul>
        </article>

        <article class="card section-card reveal">
          <h3>Modo de análise</h3>
          <div class="segmented" role="group" aria-label="Modo de análise">
            <button type="button" id="modeSingleBtn" class="segment is-active" aria-pressed="true">Imagem única</button>
            <button type="button" id="modeBatchBtn" class="segment" aria-pressed="false">Lote</button>
          </div>
          <p class="help-text" id="modeHint">Modo atual: imagem única.</p>
        </article>

        <article class="card section-card reveal">
          <h3>Entrada de arquivos</h3>
          <div class="segmented segmented-source" role="group" aria-label="Fonte de entrada em lote">
            <button type="button" id="batchSourceFilesBtn" class="segment is-active" aria-pressed="true">Lote por arquivos</button>
            <button type="button" id="batchSourceUrlsBtn" class="segment" aria-pressed="false">Lote por URLs</button>
          </div>
          <p class="help-text" id="batchSourceHint">Fonte atual: arquivos.</p>

          <label class="dropzone" id="dropzone" for="fileInput" tabindex="0" aria-label="Área de upload">
            <input
              id="fileInput"
              type="file"
              accept="image/png,image/jpeg,image/webp,image/bmp"
            />
            <strong id="dropzoneTitle">Arraste e solte uma imagem</strong>
            <span id="fileHint">ou clique para selecionar um arquivo.</span>
          </label>

          <div class="preview-pane" id="previewPane" aria-live="polite">
            <p>Sem imagem selecionada.</p>
          </div>

          <ul id="fileQueue" class="file-queue" aria-label="Arquivos selecionados"></ul>

          <label class="field-label field-label-stack" for="batchUrlsInput">URLs para lote (uma por linha)</label>
          <textarea
            id="batchUrlsInput"
            class="batch-urls-input"
            rows="5"
            placeholder="https://exemplo.com/cam-1.jpg&#10;https://exemplo.com/cam-2.jpg"
          ></textarea>
          <p class="help-text">Use este campo quando o modo for <strong>lote</strong> e a fonte for <strong>URLs</strong>.</p>

          <label class="field-label" for="imageUrl">Ou analise por URL (modo imagem única)</label>
          <input id="imageUrl" type="url" placeholder="https://exemplo.com/imagem.jpg" />
        </article>

        <article class="card section-card reveal">
          <h3>Parâmetros de inferência</h3>

          <label class="field-label" for="confRange">
            Confiança mínima
            <output id="confValue" class="mono">0.70</output>
          </label>
          <input id="confRange" type="range" min="0.10" max="0.95" step="0.01" value="0.70" />

          <label class="field-label" for="maxTags">Máximo de tags</label>
          <input id="maxTags" type="number" min="1" max="25" step="1" value="5" />

          <label class="field-label" for="minArea">Área mínima da detecção (%)</label>
          <input id="minArea" type="number" min="0" max="50" step="0.1" value="1.0" />

          <label class="field-check" for="includePerson">
            <input id="includePerson" type="checkbox" />
            <span>Incluir pessoa nas tags</span>
          </label>

          <label class="field-label" for="filterRange">
            Filtro visual de confiança (%)
            <output id="filterValue" class="mono">0%</output>
          </label>
          <input id="filterRange" type="range" min="0" max="95" step="1" value="0" />

          <label class="field-label" for="includeLabels">Incluir somente labels (CSV)</label>
          <input id="includeLabels" type="text" placeholder="mesa, notebook, cadeira" />

          <label class="field-label" for="excludeLabels">Excluir labels (CSV)</label>
          <input id="excludeLabels" type="text" placeholder="pessoa, tv" />

          <label class="field-label" for="apiKeyInput">API Key (opcional)</label>
          <input id="apiKeyInput" type="password" autocomplete="off" placeholder="X-API-Key para ambientes protegidos" />

          <div class="preset-wrap" aria-label="Presets de inferência">
            <span>Presets rápidos</span>
            <div class="preset-row">
              <button type="button" class="preset-btn" data-preset="balanced">Balanceado</button>
              <button type="button" class="preset-btn" data-preset="highPrecision">Alta precisão</button>
              <button type="button" class="preset-btn" data-preset="sensitivity">Sensível</button>
            </div>
          </div>
        </article>

        <article class="card section-card reveal">
          <h3>Presets personalizados</h3>
          <p class="help-text">Salve combinações de parâmetros para reutilizar nos próximos fluxos.</p>
          <div class="custom-preset-create">
            <label class="sr-only" for="customPresetName">Nome do preset personalizado</label>
            <input id="customPresetName" type="text" maxlength="36" placeholder="Ex.: Catálogo de produtos" />
            <button type="button" id="savePresetBtn" class="btn btn-tiny">Salvar preset</button>
          </div>
          <ul id="customPresetList" class="custom-preset-list" aria-live="polite"></ul>
        </article>

        <article class="card section-card reveal">
          <h3>Acessibilidade e Leitura</h3>
          <p class="help-text">Ajustes visuais aplicados localmente para sua experiência.</p>
          <label class="field-check" for="compactMode">
            <input id="compactMode" type="checkbox" />
            <span>Modo compacto (menos espaçamento)</span>
          </label>
          <label class="field-check" for="highContrastMode">
            <input id="highContrastMode" type="checkbox" />
            <span>Alto contraste</span>
          </label>
        </article>

        <div class="action-row reveal">
          <button type="button" id="analyzeBtn" class="btn btn-primary">Analisar</button>
          <button type="button" id="downloadBtn" class="btn btn-secondary" disabled>Exportar JSON</button>
          <button type="button" id="copyTagsBtn" class="btn btn-ghost" disabled>Copiar tags</button>
          <button type="button" id="clearBtn" class="btn btn-ghost">Limpar</button>
        </div>
      </aside>

      <section class="results-column" aria-label="Resultados da análise">
        <article class="card section-card reveal">
          <div class="header-inline">
            <h3>Resultado atual</h3>
            <span id="statusPill" class="status-pill">Pronto</span>
          </div>
          <p id="statusMessage" class="help-text" aria-live="polite">Selecione uma imagem para iniciar a análise.</p>

          <section class="metrics-grid" aria-label="Métricas">
            <div class="metric-card">
              <span>Arquivos</span>
              <strong id="metricFiles">0</strong>
            </div>
            <div class="metric-card">
              <span>Detecções</span>
              <strong id="metricDetections">0</strong>
            </div>
            <div class="metric-card">
              <span>Inferência</span>
              <strong id="metricInference">0 ms</strong>
            </div>
            <div class="metric-card">
              <span>Tags únicas</span>
              <strong id="metricUnique">0</strong>
            </div>
          </section>

          <section>
            <h4>Tags detectadas</h4>
            <div id="tagsWrap" class="tags-empty">Sem tags para exibir.</div>
          </section>

          <section>
            <h4>Comparativo de tags (última análise)</h4>
            <div id="tagDeltaWrap" class="delta-empty">Sem comparação disponível.</div>
          </section>

          <section>
            <h4>Detecções</h4>
            <div class="table-wrap">
              <table>
                <caption class="sr-only">Tabela de objetos detectados</caption>
                <thead>
                  <tr>
                    <th scope="col">Objeto</th>
                    <th scope="col">Confiança</th>
                    <th scope="col">Bounding box</th>
                  </tr>
                </thead>
                <tbody id="detectionsBody">
                  <tr>
                    <td colspan="3" class="td-empty">Nenhuma detecção disponível.</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>

          <section>
            <h4>Insights de detecção</h4>
            <div id="insightsPanel" class="insights-empty">Insights serão exibidos após a análise.</div>
          </section>
        </article>

        <article class="card section-card reveal">
          <div class="header-inline">
            <h3>Resultado do lote</h3>
            <span class="help-text">Exibido quando o modo lote estiver ativo</span>
          </div>
          <div id="batchResults" class="batch-empty">Sem análises em lote até o momento.</div>
        </article>

        <article class="card section-card reveal">
          <div class="header-inline">
            <h3>Histórico local</h3>
            <button type="button" id="clearHistoryBtn" class="btn btn-tiny">Limpar histórico</button>
          </div>
          <div class="history-tools">
            <label class="sr-only" for="historySearch">Buscar no histórico</label>
            <input id="historySearch" type="search" placeholder="Buscar por arquivo, tag ou data" />
          </div>
          <ul id="historyList" class="history-list" aria-live="polite"></ul>
        </article>

        <article class="card section-card reveal">
          <div class="header-inline">
            <h3>Painel Operacional</h3>
            <div class="ops-actions">
              <button type="button" id="refreshMetricsBtn" class="btn btn-tiny">Atualizar painel</button>
              <button type="button" id="clearCacheBtn" class="btn btn-tiny">Limpar cache</button>
            </div>
          </div>
          <p class="help-text">Requer escopo <code>admin</code> quando autenticação estiver habilitada.</p>

          <section>
            <h4>Resumo Operacional</h4>
            <div id="metricsPanel" class="ops-panel-empty">Painel ainda não carregado.</div>
          </section>

          <section>
            <h4>Configuração Runtime</h4>
            <div id="runtimePanel" class="ops-panel-empty">Sem dados de runtime.</div>
          </section>

          <section>
            <h4>Atividade Recente</h4>
            <div id="recentPanel" class="ops-panel-empty">Sem dados recentes.</div>
          </section>
        </article>
      </section>
    </section>
  </main>

  <dialog id="shortcutsDialog" class="shortcuts-dialog" aria-labelledby="shortcutsTitle">
    <div class="shortcuts-header">
      <h2 id="shortcutsTitle">Atalhos de teclado</h2>
      <button type="button" id="closeShortcutsBtn" class="btn btn-tiny">Fechar</button>
    </div>
    <ul>
      <li><kbd>Ctrl</kbd> + <kbd>Enter</kbd> Executar análise</li>
      <li><kbd>Ctrl</kbd> + <kbd>K</kbd> Focar busca no histórico</li>
      <li><kbd>Ctrl</kbd> + <kbd>B</kbd> Alternar modo lote/imagem</li>
      <li><kbd>Ctrl</kbd> + <kbd>H</kbd> Alternar alto contraste</li>
      <li><kbd>Esc</kbd> Fechar modal de atalhos</li>
    </ul>
  </dialog>
</body>
</html>
